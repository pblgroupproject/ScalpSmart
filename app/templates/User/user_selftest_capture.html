<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalp Smart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static', filename='css/User/user_selftest_capture.css')}}">
</head>
<body>
    <div class="loadingScreen" id="loadingScreen" style="display: none;">

        <div class="progressDiv">
            <h3 id="progressText">Initiating..</h3>
            <div class="progress">
                <div id="progress-bar" class="progress-bar" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>

        <div id="loading-wrapper">
            <div id="loading-text">LOADING..</div>
            <div id="loading-content"></div>
        </div>

    </div>


    <nav class="navbar navbar-expand-lg bg-light p-2" style="display: grid; grid-template-columns: 1fr 1fr;">
        <div><a class="navbar-brand" href="#" id="navbar-brand">Scalp Smart</a></div>
        <div class="navbar-toggler d-md-none border-0" style="display: flex; justify-content: end;">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="navbarNav" style="justify-content: end;">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" style="display: inline-block;" aria-current="page" href="/user/home">
                  Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="display: inline-block;" href="/user/about">
                  About Us
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="display: inline-block;" href="/user/info">
                  Info
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="display: inline-block;" href="/user/marketplace">
                  Market Place
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" style="display: inline-block;" href="/user/self-test">
                  Self-Test
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="display: inline-block;" href="/user/chat">
                  Chat
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="display: inline-block;" href="/logout">
                  Logout
              </a>
            </li>
          </ul>
        </div>
  </nav>

  <div class="hero">

      <h1>SELF - TEST</h1>

  </div>

  <div id="root">

      <form id="imageForm">

          <div class="Container">

              <div class="text" id="warningTextContainer" style="display: none;">
                  <div>
                      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M36.5 44H11.5C10.4 44 9.70001 42.8 10.2 41.8L13 37H35L37.7 41.8C38.3 42.8 37.6 44 36.5 44Z" fill="#455A64"/>
                          <path d="M24 41C33.9411 41 42 32.9411 42 23C42 13.0589 33.9411 5 24 5C14.0589 5 6 13.0589 6 23C6 32.9411 14.0589 41 24 41Z" fill="#78909C"/>
                          <path d="M24 35C17.4 35 12 29.6 12 23C12 16.4 17.4 11 24 11C30.6 11 36 16.4 36 23C36 29.6 30.6 35 24 35Z" fill="#455A64"/>
                          <path d="M24 32C28.9706 32 33 27.9706 33 23C33 18.0294 28.9706 14 24 14C19.0294 14 15 18.0294 15 23C15 27.9706 19.0294 32 24 32Z" fill="#42A5F5"/>
                          <path d="M28.7999 19.9998C27.5999 18.5998 25.7999 17.7998 23.9999 17.7998C22.1999 17.7998 20.3999 18.5998 19.1999 19.9998C18.6999 20.4998 18.7999 21.2998 19.2999 21.7998C19.7999 22.2998 20.5999 22.1998 21.0999 21.6998C22.5999 19.9998 25.3999 19.9998 26.8999 21.6998C27.1999 21.9998 27.4999 22.0998 27.8999 22.0998C28.1999 22.0998 28.4999 21.9998 28.7999 21.7998C29.1999 21.3998 29.2999 20.4998 28.7999 19.9998Z" fill="#90CAF9"/>
                      </svg>  
                  </div>
                  <h2 id="cameraStatus">Camera is starting... </h2>
              </div>

              <div class="container-item" id="container-item" style="display: none;">

                  <video autoplay id="webcamVideo"></video>

                  <div class="control-panel">

                      <div class="captureButton" id="snapshotCaptureBtn">
                          <!-- Hello -->
                      </div>


                  </div>

              </div>
              <div class="canvasHolder" id="canvasHolder" style="display: none;">

                  <canvas id="capturedImage"></canvas>
                  
                  <div class="canvasControlPanel">
                      <div id="retakeImageButton"></div>
                  </div>

              </div>
              

          </div>

          <input type="file" name="image" id="imageInput" accept="image/*" style="opacity: 0;">

      </form>


      <div class="submitContainer" id="submitContainer" style="display: none;">
          <h3>Send Image for Analysis</h3>
          <div>
              ⚠️ Make sure that you are at the center of the image as it affects the analysis <br>
              ⚠️ These images are stored in the user history <br>
              ⚠️ The analysis may take some time, do not close the window during that period 
          </div>
          <div>
              <button type="button" id="analyzeBtn" class="btn btn-warning">Analyze</button>
          </div>
      </div>

  </div>


  <footer>
      <p>Provided to you by Scalp Smart</p>
      <p>@2024 PBL Group Project</p>
  </footer>

    <script src="{{url_for('static', filename='js/User/user_selftest_capture.js')}}" type="module"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>